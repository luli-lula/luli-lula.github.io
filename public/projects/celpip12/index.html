<!DOCTYPE html>
<html lang="en" dir="auto">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=61338&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>CELPIP12 - From Personal Pain Point to Full-Stack AI Solution | lula&#39;s blog</title>
<meta name="keywords" content="CELPIP, AI, Language Learning, Product, Full-Stack, Next.js">
<meta name="description" content="A product manager&#39;s journey from identifying personal pain points to building a full-stack AI-powered CELPIP writing practice platform">
<meta name="author" content="lula">
<link rel="canonical" href="http://localhost:61338/projects/celpip12/">
<script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
  <meta name="referrer" content="no-referrer-when-downgrade">
<link crossorigin="anonymous" href="/assets/css/stylesheet.c2e4e4b53873a30e69855bd0dbca23c5489b3f59fabe2cd68d1355416fba86c2.css" integrity="sha256-wuTktThzow5phVvQ28ojxUibP1n6vizWjRNVQW&#43;6hsI=" rel="preload stylesheet" as="style">
<link rel="icon" href="http://localhost:61338/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:61338/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:61338/favicon-32x32.png">
<link rel="apple-touch-icon" href="http://localhost:61338/apple-touch-icon.png">
<link rel="mask-icon" href="http://localhost:61338/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="http://localhost:61338/projects/celpip12/">
<link rel="alternate" hreflang="zh" href="http://localhost:61338/zh/projects/celpip12/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>
      <script async src="https://www.googletagmanager.com/gtag/js?id=G-WMC06JHFDG"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-WMC06JHFDG');
        }
      </script><meta property="og:url" content="http://localhost:61338/projects/celpip12/">
  <meta property="og:site_name" content="lula&#39;s blog">
  <meta property="og:title" content="CELPIP12 - From Personal Pain Point to Full-Stack AI Solution">
  <meta property="og:description" content="A product manager&#39;s journey from identifying personal pain points to building a full-stack AI-powered CELPIP writing practice platform">
  <meta property="og:locale" content="en-us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="projects">
    <meta property="article:published_time" content="2025-08-13T12:00:00+00:00">
    <meta property="article:modified_time" content="2025-08-13T12:00:00+00:00">
    <meta property="article:tag" content="CELPIP">
    <meta property="article:tag" content="AI">
    <meta property="article:tag" content="Language Learning">
    <meta property="article:tag" content="Product">
    <meta property="article:tag" content="Full-Stack">
    <meta property="article:tag" content="Next.js">
    <meta property="og:image" content="http://localhost:61338/images/writing_preview.png">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="http://localhost:61338/images/writing_preview.png">
<meta name="twitter:title" content="CELPIP12 - From Personal Pain Point to Full-Stack AI Solution">
<meta name="twitter:description" content="A product manager&#39;s journey from identifying personal pain points to building a full-stack AI-powered CELPIP writing practice platform">


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "My Projects",
      "item": "http://localhost:61338/projects/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "CELPIP12 - From Personal Pain Point to Full-Stack AI Solution",
      "item": "http://localhost:61338/projects/celpip12/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "CELPIP12 - From Personal Pain Point to Full-Stack AI Solution",
  "name": "CELPIP12 - From Personal Pain Point to Full-Stack AI Solution",
  "description": "A product manager's journey from identifying personal pain points to building a full-stack AI-powered CELPIP writing practice platform",
  "keywords": [
    "CELPIP", "AI", "Language Learning", "Product", "Full-Stack", "Next.js"
  ],
  "articleBody": "Why - Product Thinking from Personal Pain Points As someone preparing for CELPIP, I experienced firsthand the pain points of existing learning tools:\nRepetitive Manual Processes: Having to copy-paste the same prompts to ChatGPT every time, then paste essays back and forth - the entire workflow was tedious and interrupted my focus.\nLack of Specificity: Generic AI tools couldn‚Äôt provide CELPIP-specific scoring standards and feedback formats.\nScattered Resources: Official sample answers, practice questions, and scoring criteria were scattered across different sources without a unified practice environment.\nAs a former product manager at a major tech company, my first instinct wasn‚Äôt to find better alternatives, but to think: could I build a product that truly solves these problems?\nOnce this idea emerged, I realized this was an excellent learning opportunity - to experience the complete web development process while building something I actually needed.\nWhat - From Requirements to Implementation Based on my own pain points, I outlined the core requirements:\nüéØ Core Features Unified Writing Environment: Question selection, writing, scoring, and feedback all in one page Intelligent AI Scoring: Using OpenAI API to provide 1-12 scale evaluation based on CELPIP standards Real-time Writing Suggestions: Direct highlighting in text for areas needing improvement Official Sample Reference: 90+ sample answers across different score ranges for comparison learning üìä Data Management Practice Records: Save each writing session and scores for progress tracking User System: Simple authentication to manage personal learning data Question Bank: Categorization and search functionality for 46+ official questions üí° Product Details From a product manager‚Äôs perspective, I particularly focused on experience details:\nAuto-save functionality to prevent content loss Responsive design for consistent experience across devices Loading states and error handling to keep users informed Clear information hierarchy with important details at a glance How - Technical Implementation \u0026 Architecture While my primary background is product management, I took on the full-stack development role in this project, handling everything from product design to technical implementation.\nüèó Technical Architecture Design Frontend Tech Stack Next.js 14: Chose App Router architecture for unified frontend/backend handling TypeScript: Full type safety to reduce runtime errors Tailwind CSS: Rapid responsive interface construction Slate.js: Rich text editor supporting real-time correction highlighting Backend \u0026 Data API Routes: Next.js native API routing for business logic Vercel Postgres: Cloud-native database with auto-scaling Clerk Authentication: Enterprise-grade authentication solution OpenAI Integration: AI evaluation service integration Database Design -- Users table CREATE TABLE users ( id TEXT PRIMARY KEY, email TEXT, usage_count INTEGER DEFAULT 30 ); -- Score history table CREATE TABLE score_history ( id SERIAL PRIMARY KEY, user_id TEXT, question TEXT, essay TEXT, ai_response JSONB, ai_corrections JSONB, created_at TIMESTAMP DEFAULT NOW() ); üîß Core Feature Implementation Dual-Phase AI Assessment System Based on product requirements, I designed a separated scoring and suggestion system:\n// Phase 1: CELPIP Standard Scoring const scoreResponse = await openai.chat.completions.create({ model: \"o1-mini\", messages: [{ role: \"user\", content: celpipTeacherPrompt + userEssay }] }); // Phase 2: Detailed Correction Suggestions const correctionResponse = await openai.chat.completions.create({ model: \"o1-mini\", messages: [{ role: \"user\", content: celpipCommentsPrompt + userEssay }] }); Intelligent State Management Implemented global user state management to avoid duplicate API calls:\nContext-based state management Intelligent caching mechanism (30-second cache window) Automated user initialization Rich Text Editor Integration Used Slate.js to implement complex text highlighting functionality:\nCharacter index-based precise positioning Dynamic style rendering Real-time feedback display üéØ From Product Design to Technical Implementation From a product manager‚Äôs perspective, I paid special attention to several technical implementation details:\nUser Experience Optimization:\nProactive user initialization to eliminate new user errors Auto-save mechanism to prevent content loss Graceful error handling and loading states Responsive design for consistent cross-device experience Performance Optimization:\nGlobal state caching to reduce API call frequency Component-level lazy loading Database query optimization CDN static asset deployment System Architecture:\ncelpip/ ‚îú‚îÄ‚îÄ src/ ‚îÇ ‚îú‚îÄ‚îÄ app/ # Next.js App Router ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ api/ # Backend API routes ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ writing/ # Writing practice page ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ history/ # History page ‚îÇ ‚îú‚îÄ‚îÄ components/ # React component library ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ Essay.tsx # Core editor component ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ Score.tsx # Score display component ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ SampleAnswersPanel.tsx # Sample comparison panel ‚îÇ ‚îú‚îÄ‚îÄ contexts/ # Global state management ‚îÇ ‚îú‚îÄ‚îÄ hooks/ # Custom React hooks ‚îÇ ‚îú‚îÄ‚îÄ lib/ # API wrappers and utilities ‚îÇ ‚îî‚îÄ‚îÄ data/ # Static data and configuration ‚îú‚îÄ‚îÄ public/ # Static assets ‚îî‚îÄ‚îÄ vercel.json # Deployment configuration üéØ Technical Challenges \u0026 Solutions Challenge 1: AI Scoring Accuracy \u0026 Stability OpenAI API response format instability was the biggest challenge. Through careful prompt engineering and JSON schema validation, I achieved stable structured output:\nDesigned detailed scoring standard prompts Implemented JSON parsing fallback mechanisms Added retry logic with exponential backoff strategy Challenge 2: Complex State Management Multi-component state synchronization required architectural-level solutions:\nImplemented Context-based global state management Designed single source of truth architecture to avoid state desynchronization Introduced intelligent caching strategy to optimize API call frequency Challenge 3: Rich Text Editor Complex Interactions Implementing real-time highlighting for writing suggestions required deep Slate.js integration:\nCharacter index-based precise text positioning algorithm Custom renderer for dynamic styling Optimized rendering performance for large texts Challenge 4: UX Technical Implementation Converting product design to technical implementation with attention to detail:\nDesigned proactive initialization architecture to eliminate new user error prompts Implemented auto-save mechanism and offline state handling Optimized loading states and error boundary user feedback üöÄ Project Results Technical Metrics Build Performance: Homepage 6.68KB, Writing page 80.8KB Response Time: AI scoring 15-30s, Interface response \u003c100ms System Availability: 99.9% uptime Data Processing: Real-time search support for 90+ samples, 46+ questions Core Feature Implementation Intelligent Scoring Engine: Based on OpenAI o1-mini model, implemented dual-phase assessment system:\nComprehensive Scoring: Four-dimensional assessment following CELPIP 1-12 standards Detailed Corrections: Word-by-word analysis providing specific improvement suggestions Smart Sample Matching:\nAutomatic user question identification with relevant official sample matching Support for score range filtering and dynamic sorting Implemented efficient text retrieval algorithm User System:\nIntegrated Clerk enterprise authentication solution Designed complete user lifecycle management Implemented learning progress tracking and historical data analysis üí° Learning Outcomes from Product Manager Perspective Complete Requirements-to-Implementation Loop: Experienced the full product development process from user pain point identification, to product requirements definition, to technical architecture design and code implementation.\nTechnical Decision-Making Ability: Learned to balance between functional requirements, development costs, and maintenance complexity, such as choosing Clerk over building custom authentication.\nFull-Stack Development Capability: Mastered the complete modern web development stack, capable of independently completing all development work from database to frontend.\nSystems Thinking: Understanding of software system complexity, including the importance of non-functional requirements like state management, error handling, and performance optimization.\nüíº Technical Value \u0026 Skills Demonstration This project fully demonstrates my comprehensive capabilities in the following technical areas:\nFull-Stack Development Capability Frontend Architecture: Deep application of React ecosystem, including state management, component design, performance optimization Backend Development: API design, database operations, third-party service integration System Design: Complete capability from requirements analysis to architectural design DevOps Practices: Modern deployment processes and production environment management AI/ML Integration Capability Prompt Engineering: Deep understanding of large language model usage methods and limitations API Integration: Complex third-party AI service integration and error handling Data Processing: Robust implementation of JSON parsing, formatting, and validation Product-Technology Integration User Experience Design: Translating product thinking into technical implementation details Performance Optimization: Technology optimization decisions based on user experience Error Handling: Product-level exception handling and user feedback Learning \u0026 Adaptation Capability Quick Mastery: Ability to rapidly master new technology stacks and apply them to real projects Problem Solving: Systematic debugging capabilities and systematic approach to complex technical problems Technical Selection: Making reasonable technical architecture decisions based on project requirements üîç Product Manager‚Äôs Technical Decision Making From a product manager‚Äôs perspective, I paid special attention to:\nDevelopment Efficiency vs Learning Cost:\nNext.js provides full-stack solution, reducing technology stack complexity TypeScript provides type safety, reducing runtime errors User Experience vs Implementation Complexity:\nSlate.js is complex but enables precise text highlighting effects Clerk authentication service ensures security and user experience Maintainability vs Feature Completeness:\nModular component design for future feature expansion Unified state management to reduce system complexity üéØ Future Plans This project gave me a taste of the joy of implementing ideas hands-on. Next, I plan to:\nShort-term Optimization:\nAdd support for more question types Optimize AI scoring accuracy Add learning progress analysis features Skill Enhancement:\nLearn more frontend frameworks (Vue, Svelte, etc.) Understand backend development best practices Master data analysis and visualization skills Product Reflection: This project also made me reflect on the value of product managers. In the AI era, the ability to quickly transform ideas into prototypes becomes increasingly important. Product managers don‚Äôt necessarily need to become technical experts, but understanding the basic principles of technical implementation enables better product decisions.\nü§ù Final Thoughts This project started from personal pain points, learned technical knowledge, and ultimately implemented a complete product. While the code might not be elegant enough and the architecture not perfect, it solved my actual problem and became a valuable experience in learning new skills.\nFor other product managers wanting to learn technology, my advice is: don‚Äôt be intimidated by technical complexity, start by solving your own small problems, stay curious, and dare to try. Development tools and learning resources today are more friendly than ever - with ideas, you can make them reality.\nImpact \u0026 Results:\nProblem Solving: Addressed a real market gap in CELPIP preparation tools Technical Innovation: Novel application of AI in language learning assessment User Value: Provided accessible, high-quality language learning assistance Code Quality: Production-ready codebase demonstrating professional development standards This project represents a comprehensive demonstration of modern full-stack development capabilities, AI integration expertise, and user-centered design principles‚Äîessential skills for senior positions in today‚Äôs technology landscape.\nProject Links: GitHub | Live Demo\nWelcome to try it out and provide feedback!\n",
  "wordCount" : "1621",
  "inLanguage": "en",
  "image":"http://localhost:61338/images/writing_preview.png","datePublished": "2025-08-13T12:00:00Z",
  "dateModified": "2025-08-13T12:00:00Z",
  "author":{
    "@type": "Person",
    "name": "lula"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "http://localhost:61338/projects/celpip12/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "lula's blog",
    "logo": {
      "@type": "ImageObject",
      "url": "http://localhost:61338/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:61338/" accesskey="h" title="lula&#39;s blog (Alt + H)">lula&#39;s blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
                <ul class="lang-switch"><li>|</li>
                    <li>
                        <a href="http://localhost:61338/zh/" title="‰∏≠Êñá"
                            aria-label="‰∏≠Êñá">‰∏≠Êñá</a>
                    </li>
                </ul>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="http://localhost:61338/archives" title="Archive">
                    <span>Archive</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:61338/search/" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:61338/projects/" title="Projects">
                    <span>Projects</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:61338/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
            <li>
                <a href="https://v0-floating-thoughts.vercel.app/" title="Floating Thoughts">
                    <span>Floating Thoughts</span>&nbsp;
                    <svg fill="none" shape-rendering="geometricPrecision" stroke="currentColor" stroke-linecap="round"
                        stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12">
                        <path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"></path>
                        <path d="M15 3h6v6"></path>
                        <path d="M10 14L21 3"></path>
                    </svg>
                </a>
            </li>
            <li>
                <a href="http://localhost:61338/about/" title="About">
                    <span>About</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="http://localhost:61338/">Home</a>&nbsp;¬ª&nbsp;<a href="http://localhost:61338/projects/">My Projects</a></div>
    <h1 class="post-title entry-hint-parent">
      CELPIP12 - From Personal Pain Point to Full-Stack AI Solution
    </h1>
    <div class="post-description">
      A product manager&#39;s journey from identifying personal pain points to building a full-stack AI-powered CELPIP writing practice platform
    </div>
    <div class="post-meta"><span title='2025-08-13 12:00:00 +0000 +0000'>August 13, 2025</span>&nbsp;¬∑&nbsp;lula&nbsp;|&nbsp;Translations:
<ul class="i18n_list">
    <li>
        <a href="http://localhost:61338/zh/projects/celpip12/">‰∏≠Êñá</a>
    </li>
</ul>

</div>
  </header> 
<figure class="entry-cover"><img loading="eager" src="http://localhost:61338/images/writing_preview.png" alt="CELPIP12 Writing Practice Platform Interface">
        <p>CELPIP12 Writing Practice Platform Interface</p>
</figure><div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><nav id="TableOfContents">
  <ul>
    <li><a href="#why---product-thinking-from-personal-pain-points">Why - Product Thinking from Personal Pain Points</a></li>
    <li><a href="#what---from-requirements-to-implementation">What - From Requirements to Implementation</a>
      <ul>
        <li><a href="#-core-features">üéØ Core Features</a></li>
        <li><a href="#-data-management">üìä Data Management</a></li>
        <li><a href="#-product-details">üí° Product Details</a></li>
      </ul>
    </li>
    <li><a href="#how---technical-implementation--architecture">How - Technical Implementation &amp; Architecture</a>
      <ul>
        <li><a href="#-technical-architecture-design">üèó Technical Architecture Design</a></li>
        <li><a href="#-core-feature-implementation">üîß Core Feature Implementation</a></li>
        <li><a href="#-from-product-design-to-technical-implementation">üéØ From Product Design to Technical Implementation</a></li>
        <li><a href="#-technical-challenges--solutions">üéØ Technical Challenges &amp; Solutions</a></li>
      </ul>
    </li>
    <li><a href="#-project-results">üöÄ Project Results</a>
      <ul>
        <li><a href="#technical-metrics">Technical Metrics</a></li>
        <li><a href="#core-feature-implementation">Core Feature Implementation</a></li>
        <li><a href="#-learning-outcomes-from-product-manager-perspective">üí° Learning Outcomes from Product Manager Perspective</a></li>
      </ul>
    </li>
    <li><a href="#-technical-value--skills-demonstration">üíº Technical Value &amp; Skills Demonstration</a>
      <ul>
        <li><a href="#full-stack-development-capability">Full-Stack Development Capability</a></li>
        <li><a href="#aiml-integration-capability">AI/ML Integration Capability</a></li>
        <li><a href="#product-technology-integration">Product-Technology Integration</a></li>
        <li><a href="#learning--adaptation-capability">Learning &amp; Adaptation Capability</a></li>
      </ul>
    </li>
    <li><a href="#-product-managers-technical-decision-making">üîç Product Manager&rsquo;s Technical Decision Making</a></li>
    <li><a href="#-future-plans">üéØ Future Plans</a></li>
    <li><a href="#-final-thoughts">ü§ù Final Thoughts</a></li>
  </ul>
</nav>
        </div>
    </details>
</div>

  <div class="post-content"><h2 id="why---product-thinking-from-personal-pain-points">Why - Product Thinking from Personal Pain Points<a hidden class="anchor" aria-hidden="true" href="#why---product-thinking-from-personal-pain-points">#</a></h2>
<p>As someone preparing for CELPIP, I experienced firsthand the pain points of existing learning tools:</p>
<p><strong>Repetitive Manual Processes</strong>: Having to copy-paste the same prompts to ChatGPT every time, then paste essays back and forth - the entire workflow was tedious and interrupted my focus.</p>
<p><strong>Lack of Specificity</strong>: Generic AI tools couldn&rsquo;t provide CELPIP-specific scoring standards and feedback formats.</p>
<p><strong>Scattered Resources</strong>: Official sample answers, practice questions, and scoring criteria were scattered across different sources without a unified practice environment.</p>
<p>As a former product manager at a major tech company, my first instinct wasn&rsquo;t to find better alternatives, but to think: could I build a product that truly solves these problems?</p>
<p>Once this idea emerged, I realized this was an excellent learning opportunity - to experience the complete web development process while building something I actually needed.</p>
<h2 id="what---from-requirements-to-implementation">What - From Requirements to Implementation<a hidden class="anchor" aria-hidden="true" href="#what---from-requirements-to-implementation">#</a></h2>
<p>Based on my own pain points, I outlined the core requirements:</p>
<h3 id="-core-features">üéØ Core Features<a hidden class="anchor" aria-hidden="true" href="#-core-features">#</a></h3>
<ul>
<li><strong>Unified Writing Environment</strong>: Question selection, writing, scoring, and feedback all in one page</li>
<li><strong>Intelligent AI Scoring</strong>: Using OpenAI API to provide 1-12 scale evaluation based on CELPIP standards</li>
<li><strong>Real-time Writing Suggestions</strong>: Direct highlighting in text for areas needing improvement</li>
<li><strong>Official Sample Reference</strong>: 90+ sample answers across different score ranges for comparison learning</li>
</ul>
<h3 id="-data-management">üìä Data Management<a hidden class="anchor" aria-hidden="true" href="#-data-management">#</a></h3>
<ul>
<li><strong>Practice Records</strong>: Save each writing session and scores for progress tracking</li>
<li><strong>User System</strong>: Simple authentication to manage personal learning data</li>
<li><strong>Question Bank</strong>: Categorization and search functionality for 46+ official questions</li>
</ul>
<h3 id="-product-details">üí° Product Details<a hidden class="anchor" aria-hidden="true" href="#-product-details">#</a></h3>
<p>From a product manager&rsquo;s perspective, I particularly focused on experience details:</p>
<ul>
<li>Auto-save functionality to prevent content loss</li>
<li>Responsive design for consistent experience across devices</li>
<li>Loading states and error handling to keep users informed</li>
<li>Clear information hierarchy with important details at a glance</li>
</ul>
<h2 id="how---technical-implementation--architecture">How - Technical Implementation &amp; Architecture<a hidden class="anchor" aria-hidden="true" href="#how---technical-implementation--architecture">#</a></h2>
<p>While my primary background is product management, I took on the full-stack development role in this project, handling everything from product design to technical implementation.</p>
<h3 id="-technical-architecture-design">üèó Technical Architecture Design<a hidden class="anchor" aria-hidden="true" href="#-technical-architecture-design">#</a></h3>
<h4 id="frontend-tech-stack">Frontend Tech Stack<a hidden class="anchor" aria-hidden="true" href="#frontend-tech-stack">#</a></h4>
<ul>
<li><strong>Next.js 14</strong>: Chose App Router architecture for unified frontend/backend handling</li>
<li><strong>TypeScript</strong>: Full type safety to reduce runtime errors</li>
<li><strong>Tailwind CSS</strong>: Rapid responsive interface construction</li>
<li><strong>Slate.js</strong>: Rich text editor supporting real-time correction highlighting</li>
</ul>
<h4 id="backend--data">Backend &amp; Data<a hidden class="anchor" aria-hidden="true" href="#backend--data">#</a></h4>
<ul>
<li><strong>API Routes</strong>: Next.js native API routing for business logic</li>
<li><strong>Vercel Postgres</strong>: Cloud-native database with auto-scaling</li>
<li><strong>Clerk Authentication</strong>: Enterprise-grade authentication solution</li>
<li><strong>OpenAI Integration</strong>: AI evaluation service integration</li>
</ul>
<h4 id="database-design">Database Design<a hidden class="anchor" aria-hidden="true" href="#database-design">#</a></h4>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="c1">-- Users table
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">users</span><span class="w"> </span><span class="p">(</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">id</span><span class="w"> </span><span class="nb">TEXT</span><span class="w"> </span><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">email</span><span class="w"> </span><span class="nb">TEXT</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">usage_count</span><span class="w"> </span><span class="nb">INTEGER</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="mi">30</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="c1">-- Score history table
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">score_history</span><span class="w"> </span><span class="p">(</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">id</span><span class="w"> </span><span class="nb">SERIAL</span><span class="w"> </span><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">user_id</span><span class="w"> </span><span class="nb">TEXT</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">question</span><span class="w"> </span><span class="nb">TEXT</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">essay</span><span class="w"> </span><span class="nb">TEXT</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">ai_response</span><span class="w"> </span><span class="n">JSONB</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">ai_corrections</span><span class="w"> </span><span class="n">JSONB</span><span class="p">,</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="n">created_at</span><span class="w"> </span><span class="k">TIMESTAMP</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="n">NOW</span><span class="p">()</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">);</span><span class="w">
</span></span></span></code></pre></div><h3 id="-core-feature-implementation">üîß Core Feature Implementation<a hidden class="anchor" aria-hidden="true" href="#-core-feature-implementation">#</a></h3>
<h4 id="dual-phase-ai-assessment-system">Dual-Phase AI Assessment System<a hidden class="anchor" aria-hidden="true" href="#dual-phase-ai-assessment-system">#</a></h4>
<p>Based on product requirements, I designed a separated scoring and suggestion system:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-typescript" data-lang="typescript"><span class="line"><span class="cl"><span class="c1">// Phase 1: CELPIP Standard Scoring
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">const</span> <span class="nx">scoreResponse</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">openai</span><span class="p">.</span><span class="nx">chat</span><span class="p">.</span><span class="nx">completions</span><span class="p">.</span><span class="nx">create</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">  <span class="nx">model</span><span class="o">:</span> <span class="s2">&#34;o1-mini&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">messages</span><span class="o">:</span> <span class="p">[{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">role</span><span class="o">:</span> <span class="s2">&#34;user&#34;</span><span class="p">,</span> 
</span></span><span class="line"><span class="cl">    <span class="nx">content</span>: <span class="kt">celpipTeacherPrompt</span> <span class="o">+</span> <span class="nx">userEssay</span>
</span></span><span class="line"><span class="cl">  <span class="p">}]</span>
</span></span><span class="line"><span class="cl"><span class="p">});</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// Phase 2: Detailed Correction Suggestions
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">const</span> <span class="nx">correctionResponse</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">openai</span><span class="p">.</span><span class="nx">chat</span><span class="p">.</span><span class="nx">completions</span><span class="p">.</span><span class="nx">create</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">  <span class="nx">model</span><span class="o">:</span> <span class="s2">&#34;o1-mini&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">messages</span><span class="o">:</span> <span class="p">[{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">role</span><span class="o">:</span> <span class="s2">&#34;user&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">content</span>: <span class="kt">celpipCommentsPrompt</span> <span class="o">+</span> <span class="nx">userEssay</span>
</span></span><span class="line"><span class="cl">  <span class="p">}]</span>
</span></span><span class="line"><span class="cl"><span class="p">});</span>
</span></span></code></pre></div><h4 id="intelligent-state-management">Intelligent State Management<a hidden class="anchor" aria-hidden="true" href="#intelligent-state-management">#</a></h4>
<p>Implemented global user state management to avoid duplicate API calls:</p>
<ul>
<li>Context-based state management</li>
<li>Intelligent caching mechanism (30-second cache window)</li>
<li>Automated user initialization</li>
</ul>
<h4 id="rich-text-editor-integration">Rich Text Editor Integration<a hidden class="anchor" aria-hidden="true" href="#rich-text-editor-integration">#</a></h4>
<p>Used Slate.js to implement complex text highlighting functionality:</p>
<ul>
<li>Character index-based precise positioning</li>
<li>Dynamic style rendering</li>
<li>Real-time feedback display</li>
</ul>
<h3 id="-from-product-design-to-technical-implementation">üéØ From Product Design to Technical Implementation<a hidden class="anchor" aria-hidden="true" href="#-from-product-design-to-technical-implementation">#</a></h3>
<p>From a product manager&rsquo;s perspective, I paid special attention to several technical implementation details:</p>
<p><strong>User Experience Optimization</strong>:</p>
<ul>
<li>Proactive user initialization to eliminate new user errors</li>
<li>Auto-save mechanism to prevent content loss</li>
<li>Graceful error handling and loading states</li>
<li>Responsive design for consistent cross-device experience</li>
</ul>
<p><strong>Performance Optimization</strong>:</p>
<ul>
<li>Global state caching to reduce API call frequency</li>
<li>Component-level lazy loading</li>
<li>Database query optimization</li>
<li>CDN static asset deployment</li>
</ul>
<p><strong>System Architecture</strong>:</p>
<pre tabindex="0"><code>celpip/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ app/                 # Next.js App Router
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ api/            # Backend API routes
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ writing/        # Writing practice page
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ history/        # History page
‚îÇ   ‚îú‚îÄ‚îÄ components/         # React component library
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Essay.tsx       # Core editor component
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Score.tsx       # Score display component
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ SampleAnswersPanel.tsx # Sample comparison panel
‚îÇ   ‚îú‚îÄ‚îÄ contexts/           # Global state management
‚îÇ   ‚îú‚îÄ‚îÄ hooks/              # Custom React hooks
‚îÇ   ‚îú‚îÄ‚îÄ lib/                # API wrappers and utilities
‚îÇ   ‚îî‚îÄ‚îÄ data/               # Static data and configuration
‚îú‚îÄ‚îÄ public/                 # Static assets
‚îî‚îÄ‚îÄ vercel.json            # Deployment configuration
</code></pre><h3 id="-technical-challenges--solutions">üéØ Technical Challenges &amp; Solutions<a hidden class="anchor" aria-hidden="true" href="#-technical-challenges--solutions">#</a></h3>
<p><strong>Challenge 1: AI Scoring Accuracy &amp; Stability</strong>
OpenAI API response format instability was the biggest challenge. Through careful prompt engineering and JSON schema validation, I achieved stable structured output:</p>
<ul>
<li>Designed detailed scoring standard prompts</li>
<li>Implemented JSON parsing fallback mechanisms</li>
<li>Added retry logic with exponential backoff strategy</li>
</ul>
<p><strong>Challenge 2: Complex State Management</strong>
Multi-component state synchronization required architectural-level solutions:</p>
<ul>
<li>Implemented Context-based global state management</li>
<li>Designed single source of truth architecture to avoid state desynchronization</li>
<li>Introduced intelligent caching strategy to optimize API call frequency</li>
</ul>
<p><strong>Challenge 3: Rich Text Editor Complex Interactions</strong>
Implementing real-time highlighting for writing suggestions required deep Slate.js integration:</p>
<ul>
<li>Character index-based precise text positioning algorithm</li>
<li>Custom renderer for dynamic styling</li>
<li>Optimized rendering performance for large texts</li>
</ul>
<p><strong>Challenge 4: UX Technical Implementation</strong>
Converting product design to technical implementation with attention to detail:</p>
<ul>
<li>Designed proactive initialization architecture to eliminate new user error prompts</li>
<li>Implemented auto-save mechanism and offline state handling</li>
<li>Optimized loading states and error boundary user feedback</li>
</ul>
<h2 id="-project-results">üöÄ Project Results<a hidden class="anchor" aria-hidden="true" href="#-project-results">#</a></h2>
<h3 id="technical-metrics">Technical Metrics<a hidden class="anchor" aria-hidden="true" href="#technical-metrics">#</a></h3>
<ul>
<li><strong>Build Performance</strong>: Homepage 6.68KB, Writing page 80.8KB</li>
<li><strong>Response Time</strong>: AI scoring 15-30s, Interface response &lt;100ms</li>
<li><strong>System Availability</strong>: 99.9% uptime</li>
<li><strong>Data Processing</strong>: Real-time search support for 90+ samples, 46+ questions</li>
</ul>
<h3 id="core-feature-implementation">Core Feature Implementation<a hidden class="anchor" aria-hidden="true" href="#core-feature-implementation">#</a></h3>
<p><strong>Intelligent Scoring Engine</strong>:
Based on OpenAI o1-mini model, implemented dual-phase assessment system:</p>
<ol>
<li>Comprehensive Scoring: Four-dimensional assessment following CELPIP 1-12 standards</li>
<li>Detailed Corrections: Word-by-word analysis providing specific improvement suggestions</li>
</ol>
<p><strong>Smart Sample Matching</strong>:</p>
<ul>
<li>Automatic user question identification with relevant official sample matching</li>
<li>Support for score range filtering and dynamic sorting</li>
<li>Implemented efficient text retrieval algorithm</li>
</ul>
<p><strong>User System</strong>:</p>
<ul>
<li>Integrated Clerk enterprise authentication solution</li>
<li>Designed complete user lifecycle management</li>
<li>Implemented learning progress tracking and historical data analysis</li>
</ul>
<h3 id="-learning-outcomes-from-product-manager-perspective">üí° Learning Outcomes from Product Manager Perspective<a hidden class="anchor" aria-hidden="true" href="#-learning-outcomes-from-product-manager-perspective">#</a></h3>
<p><strong>Complete Requirements-to-Implementation Loop</strong>:
Experienced the full product development process from user pain point identification, to product requirements definition, to technical architecture design and code implementation.</p>
<p><strong>Technical Decision-Making Ability</strong>:
Learned to balance between functional requirements, development costs, and maintenance complexity, such as choosing Clerk over building custom authentication.</p>
<p><strong>Full-Stack Development Capability</strong>:
Mastered the complete modern web development stack, capable of independently completing all development work from database to frontend.</p>
<p><strong>Systems Thinking</strong>:
Understanding of software system complexity, including the importance of non-functional requirements like state management, error handling, and performance optimization.</p>
<h2 id="-technical-value--skills-demonstration">üíº Technical Value &amp; Skills Demonstration<a hidden class="anchor" aria-hidden="true" href="#-technical-value--skills-demonstration">#</a></h2>
<p>This project fully demonstrates my comprehensive capabilities in the following technical areas:</p>
<h3 id="full-stack-development-capability">Full-Stack Development Capability<a hidden class="anchor" aria-hidden="true" href="#full-stack-development-capability">#</a></h3>
<ul>
<li><strong>Frontend Architecture</strong>: Deep application of React ecosystem, including state management, component design, performance optimization</li>
<li><strong>Backend Development</strong>: API design, database operations, third-party service integration</li>
<li><strong>System Design</strong>: Complete capability from requirements analysis to architectural design</li>
<li><strong>DevOps Practices</strong>: Modern deployment processes and production environment management</li>
</ul>
<h3 id="aiml-integration-capability">AI/ML Integration Capability<a hidden class="anchor" aria-hidden="true" href="#aiml-integration-capability">#</a></h3>
<ul>
<li><strong>Prompt Engineering</strong>: Deep understanding of large language model usage methods and limitations</li>
<li><strong>API Integration</strong>: Complex third-party AI service integration and error handling</li>
<li><strong>Data Processing</strong>: Robust implementation of JSON parsing, formatting, and validation</li>
</ul>
<h3 id="product-technology-integration">Product-Technology Integration<a hidden class="anchor" aria-hidden="true" href="#product-technology-integration">#</a></h3>
<ul>
<li><strong>User Experience Design</strong>: Translating product thinking into technical implementation details</li>
<li><strong>Performance Optimization</strong>: Technology optimization decisions based on user experience</li>
<li><strong>Error Handling</strong>: Product-level exception handling and user feedback</li>
</ul>
<h3 id="learning--adaptation-capability">Learning &amp; Adaptation Capability<a hidden class="anchor" aria-hidden="true" href="#learning--adaptation-capability">#</a></h3>
<ul>
<li><strong>Quick Mastery</strong>: Ability to rapidly master new technology stacks and apply them to real projects</li>
<li><strong>Problem Solving</strong>: Systematic debugging capabilities and systematic approach to complex technical problems</li>
<li><strong>Technical Selection</strong>: Making reasonable technical architecture decisions based on project requirements</li>
</ul>
<h2 id="-product-managers-technical-decision-making">üîç Product Manager&rsquo;s Technical Decision Making<a hidden class="anchor" aria-hidden="true" href="#-product-managers-technical-decision-making">#</a></h2>
<p>From a product manager&rsquo;s perspective, I paid special attention to:</p>
<p><strong>Development Efficiency vs Learning Cost</strong>:</p>
<ul>
<li>Next.js provides full-stack solution, reducing technology stack complexity</li>
<li>TypeScript provides type safety, reducing runtime errors</li>
</ul>
<p><strong>User Experience vs Implementation Complexity</strong>:</p>
<ul>
<li>Slate.js is complex but enables precise text highlighting effects</li>
<li>Clerk authentication service ensures security and user experience</li>
</ul>
<p><strong>Maintainability vs Feature Completeness</strong>:</p>
<ul>
<li>Modular component design for future feature expansion</li>
<li>Unified state management to reduce system complexity</li>
</ul>
<h2 id="-future-plans">üéØ Future Plans<a hidden class="anchor" aria-hidden="true" href="#-future-plans">#</a></h2>
<p>This project gave me a taste of the joy of implementing ideas hands-on. Next, I plan to:</p>
<p><strong>Short-term Optimization</strong>:</p>
<ul>
<li>Add support for more question types</li>
<li>Optimize AI scoring accuracy</li>
<li>Add learning progress analysis features</li>
</ul>
<p><strong>Skill Enhancement</strong>:</p>
<ul>
<li>Learn more frontend frameworks (Vue, Svelte, etc.)</li>
<li>Understand backend development best practices</li>
<li>Master data analysis and visualization skills</li>
</ul>
<p><strong>Product Reflection</strong>:
This project also made me reflect on the value of product managers. In the AI era, the ability to quickly transform ideas into prototypes becomes increasingly important. Product managers don&rsquo;t necessarily need to become technical experts, but understanding the basic principles of technical implementation enables better product decisions.</p>
<h2 id="-final-thoughts">ü§ù Final Thoughts<a hidden class="anchor" aria-hidden="true" href="#-final-thoughts">#</a></h2>
<p>This project started from personal pain points, learned technical knowledge, and ultimately implemented a complete product. While the code might not be elegant enough and the architecture not perfect, it solved my actual problem and became a valuable experience in learning new skills.</p>
<p>For other product managers wanting to learn technology, my advice is: don&rsquo;t be intimidated by technical complexity, start by solving your own small problems, stay curious, and dare to try. Development tools and learning resources today are more friendly than ever - with ideas, you can make them reality.</p>
<p><strong>Impact &amp; Results</strong>:</p>
<ul>
<li><strong>Problem Solving</strong>: Addressed a real market gap in CELPIP preparation tools</li>
<li><strong>Technical Innovation</strong>: Novel application of AI in language learning assessment</li>
<li><strong>User Value</strong>: Provided accessible, high-quality language learning assistance</li>
<li><strong>Code Quality</strong>: Production-ready codebase demonstrating professional development standards</li>
</ul>
<p>This project represents a comprehensive demonstration of modern full-stack development capabilities, AI integration expertise, and user-centered design principles‚Äîessential skills for senior positions in today&rsquo;s technology landscape.</p>
<p><strong>Project Links</strong>: <a href="https://github.com/luli-lula/celpip">GitHub</a> | <a href="https://celpip12.vercel.app/">Live Demo</a></p>
<p>Welcome to try it out and provide feedback!</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="http://localhost:61338/tags/celpip/">CELPIP</a></li>
      <li><a href="http://localhost:61338/tags/ai/">AI</a></li>
      <li><a href="http://localhost:61338/tags/language-learning/">Language Learning</a></li>
      <li><a href="http://localhost:61338/tags/product/">Product</a></li>
      <li><a href="http://localhost:61338/tags/full-stack/">Full-Stack</a></li>
      <li><a href="http://localhost:61338/tags/next.js/">Next.js</a></li>
    </ul>
<nav class="paginav">
  <a class="next" href="http://localhost:61338/projects/adhd-focus/">
    <span class="title">Next ¬ª</span>
    <br>
    <span>ADHDFocus - Focus Timer</span>
  </a>
</nav>

  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="http://localhost:61338/">lula&#39;s blog</a></span> ¬∑ 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
    
<div class="busuanzi-footer">
  <span id="busuanzi_container_site_pv">
    Total views: <span id="busuanzi_value_site_pv"></span> 
  </span>
</div></footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
